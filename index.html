<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Treasure Bot Beta</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script src="//libtl.com/sdk.js" data-zone="9754867" data-sdk="show_9754867"></script>
  <style>
    body {margin:0;font-family:'Segoe UI',sans-serif;background:linear-gradient(120deg,#0f2027,#203a43,#2c5364);color:#fff;display:flex;flex-direction:column;height:100vh;}
    .section{flex:1;padding:18px;display:none;overflow-y:auto;backdrop-filter:blur(8px) brightness(1.08);border-radius:18px 18px 0 0;box-shadow:0 0 30px 0 rgba(0,0,0,0.25);}
    .section.active{display:block;animation:fadeIn .6s ease-in-out;}
    @keyframes fadeIn{from{opacity:0;transform:translateY(20px);}to{opacity:1;transform:translateY(0);}}
    .card{background:rgba(255,255,255,.07);padding:13px;border-radius:15px;margin-bottom:12px;font-size:15px;box-shadow:0 2px 10px rgba(0,255,150,.1);}
    .btn{display:flex;justify-content:center;align-items:center;background:linear-gradient(90deg,#00ff9d,#00d4ff);color:#000;font-weight:bold;padding:10px;border-radius:12px;font-size:18px;cursor:pointer;margin-top:8px;border:none;box-shadow:0 0 10px rgba(0,255,150,.4);transition:transform .2s,box-shadow .3s;}
    .btn:active{transform:scale(.95);box-shadow:0 0 15px rgba(0,255,150,.7);}
    nav{display:flex;justify-content:space-around;background:rgba(0,0,0,.4);padding:10px 0;position:sticky;bottom:0;border-radius:0 0 16px 16px;backdrop-filter:blur(10px);box-shadow:0 0 20px rgba(0,0,0,.5);}
    nav button{background:none;border:none;color:#fff;font-size:22px;cursor:pointer;}
    h2{font-size:20px;margin-bottom:10px;font-weight:600;text-shadow:0 2px 10px rgba(0,255,150,.3);}
    .mine-area{position:relative;width:100%;max-width:400px;margin:0 auto 15px auto;height:160px;background:url('https://i.ibb.co/pwgbL2H/mine-bg.jpg') center/cover;border-radius:18px;overflow:hidden;box-shadow:0 0 25px rgba(0,255,150,.25);}
    .miner{position:absolute;left:40%;bottom:20px;width:50px;height:50px;animation:bounce 1.5s infinite alternate;}
    @keyframes bounce{0%{transform:translateY(0);}100%{transform:translateY(-10px);}}
    .treasure{position:absolute;right:15%;bottom:15px;width:35px;animation:glow 2s infinite alternate;}
    @keyframes glow{0%{filter:drop-shadow(0 0 10px #00ff9d);}100%{filter:drop-shadow(0 0 25px #00ff9d);}}
    .mining-timer{text-align:center;margin-top:8px;font-size:15px;color:#00ff9d;letter-spacing:1px;}
  </style>
</head>
<body>

  <!-- Home Section -->
  <div id="home" class="section active">
    <h2>🏠 Home</h2>
    <div class="mine-area">
      <img src="https://i.ibb.co/3WxHPpL/miner.png" class="miner" alt="Miner" />
      <img src="https://i.ibb.co/W5RzSg7/treasure.png" class="treasure" alt="Treasure" id="treasureBox" style="display:none;" />
    </div>
    <div class="mining-timer" id="miningTimer"></div>
    <div class="card">
      <div>💰 Balance: <span id="balance">0</span> points</div>
      <div>🎯 Completed Tasks: <span id="tasksDone">0</span></div>
      <div>👥 Referrals: <span id="referrals">0</span></div>
    </div>
    <button class="btn" id="startMiningBtn" onclick="startMining()">⛏️ Start Mining</button>
    <button class="btn" id="claimMiningBtn" onclick="claimMining()" style="display:none;">💎 Claim</button>
  </div>

  <!-- Tasks Section -->
  <div id="tasks" class="section">
    <h2>📋 Tasks</h2>
    <div class="card">
      <img src="https://i.ibb.co/sJPzxRj/join-channel.png" alt="Join" style="width:100%;border-radius:10px;">
      <p>🔔 Join our Telegram channel to earn extra rewards!</p>
      <button class="btn" onclick="joinChannel()">📢 Join Channel</button>
      <div id="joinStatus"></div>
    </div>
    <div class="card">
      <img src="https://i.ibb.co/MSTsR00/watch-ad.png" alt="Watch Ad" style="width:100%;border-radius:10px;">
      <p>Watch ads to earn points!</p>
      <button class="btn" onclick="watchAd(1)">▶️ Watch Ad</button>
    </div>
    <div class="card">
      <img src="https://i.ibb.co/gzW5zG8/daily-bonus.png" alt="Bonus" style="width:100%;border-radius:10px;">
      <p>🎁 Daily Bonus</p>
      <button class="btn" onclick="claimDailyBonus()">Claim Bonus</button>
    </div>
  </div>

  <!-- Leaderboard Section -->
  <div id="leaderboard" class="section">
    <h2>🏆 Leaderboard</h2>
    <ul class="leaderboard-list" id="leaderboardList"></ul>
  </div>

  <!-- Referrals Section -->
  <div id="referral" class="section">
    <h2>🔗 Referrals</h2>
    <div class="card">
      <p>Your referral code: <span id="refCode">ABC123</span></p>
      <p>Invite friends and earn rewards!</p>
    </div>
    <ul class="referral-list" id="referralList">
      <li>No referrals yet.</li>
    </ul>
  </div>

  <!-- Withdraw Section -->
  <div id="withdraw" class="section">
    <h2>🏧 Withdraw</h2>
    <div class="card">
      <label>USDT TRC-20 Wallet:</label>
      <input type="text" id="walletAddress" placeholder="Enter wallet address">
      <button class="btn" onclick="withdrawPoints()">💸 Withdraw</button>
    </div>
  </div>

  <nav>
    <button onclick="showSection('home')">🏠</button>
    <button onclick="showSection('tasks')">📋</button>
    <button onclick="showSection('leaderboard')">🏆</button>
    <button onclick="showSection('referral')">🔗</button>
    <button onclick="showSection('withdraw')">🏧</button>
  </nav>

<script>
  const sections=document.querySelectorAll('.section');
  function showSection(id){sections.forEach(s=>s.classList.remove('active'));document.getElementById(id).classList.add('active');}

  let balance=0,tasksDone=0,referrals=0,refData=[],miningStatus="idle",miningInterval=null,miningStartTime=null,miningEndTime=null,miningPoints=0,miningTreasure=false;
  const MINING_DURATION=60,MINING_POINTS_REWARD=500,MINING_TREASURE_CHANCE=.05;

  function updateHome(){document.getElementById('balance').innerText=balance;document.getElementById('tasksDone').innerText=tasksDone;document.getElementById('referrals').innerText=referrals;}

  function startMining(){if(miningStatus!=="idle")return;if(typeof show_9754867!=="function"){alert("Ad system not ready");return;}miningStatus="ad";document.getElementById("startMiningBtn").disabled=true;show_9754867('pop').then(()=>{miningStartTime=Date.now();miningEndTime=miningStartTime+MINING_DURATION*1000;miningPoints=MINING_POINTS_REWARD;miningTreasure=Math.random()<MINING_TREASURE_CHANCE;document.getElementById("miningTimer").innerText="Mining in progress...";miningInterval=setInterval(miningCountdown,1000);document.getElementById("startMiningBtn").style.display="none";document.getElementById("claimMiningBtn").style.display="inline-block";}).catch(()=>{alert("Ad failed, try again");miningStatus="idle";document.getElementById("startMiningBtn").disabled=false;});}

  function miningCountdown(){let now=Date.now(),remaining=Math.max(0,Math.floor((miningEndTime-now)/1000));document.getElementById("miningTimer").innerText=`⏳ ${remaining}s remaining`;if(remaining<=0){clearInterval(miningInterval);document.getElementById("miningTimer").innerText="Mining done! Claim your reward.";}}

  function claimMining(){balance+=miningPoints;tasksDone++;if(miningTreasure)document.getElementById("treasureBox").style.display="inline-block";miningStatus="idle";document.getElementById("startMiningBtn").style.display="inline-block";document.getElementById("claimMiningBtn").style.display="none";document.getElementById("miningTimer").innerText="";updateHome();}

  function watchAd(points){show_9754867('reward').then(()=>{balance+=points;tasksDone++;updateHome();}).catch(()=>alert("Ad failed"));}

  function claimDailyBonus(){const today=new Date().toDateString();if(localStorage.getItem("dailyBonus")==today){alert("Already claimed today");return;}const bonus=Math.floor(Math.random()*300)+100;balance+=bonus;tasksDone++;localStorage.setItem("dailyBonus",today);alert(`🎁 Daily Bonus: ${bonus} points!`);updateHome();}

  function withdrawPoints(){const wallet=document.getElementById("walletAddress").value.trim();if(!wallet){alert("Enter wallet address");return;}if(balance<1000){alert("Minimum 1000 points required");return;}alert(`✅ Withdraw request of ${balance} points sent to ${wallet}`);balance=0;updateHome();}

  function joinChannel(){const channel="@YourChannel";Telegram.WebApp.openLink(`https://t.me/${channel.replace('@','')}`);setTimeout(()=>{document.getElementById("joinStatus").textContent="✅ Joined!";balance+=10;tasksDone++;updateHome();},3000);}

  updateHome();
</script>
</body>
</html>
